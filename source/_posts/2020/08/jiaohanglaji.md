---
title: 从一个程序猿角度来分析下，交通银行的系统到底有多么垃圾
date: 2020-08-18 00:32:59
---

## 1. 接触交行

先说下接触交行的原因，起先，我也办理了一张大家都应该推荐的招商信用卡。期间也没什么问题，但是后面习惯了去山姆购物，交行办卡小哥就在山姆门口各种推荐交行信用卡，因为交行信用卡有个卡种，可以支持山姆超市打折，也是这个原因办理了交行的信用卡。



## 2. 事情起因

再说下本次事情的起源。

我其实日常信用卡用的也不多，刚好搬家刷了一个 6000 的冰箱，但是因为店家无货所以取消。再加上额外消费了 1000 左右，所以当时需要还的大概是 1200。

我的还款到期日是 **8 月 4 号**。请记住这个节点。

**7 月 31 号**，我用手机尝试还款一次。当下显示还款中，我因为刚搬家比较忙，就没一直关注。毕竟就还 1000 多，而我卡了差不多有八千

**8 月 4 号**，再次收到短信，我去买单吧查看账单，发现没有还清。以为第一次操作失败了或者忘记了，于是我又重新输了一次验证码。

**8 月 6 日**，这一天其实已经是逾期了，我当天又试了一次还款。结果过了好一会儿依然没有反应。于是我赶紧用支付宝换了一千多，同时打了电话过去给客服。交行的语音识别极不靠谱，我差不多打了三四个电话，才终于找到客服。但是按照客服的说法是，你缴纳了百分十以上（也就是冰箱的退款），并不会影响你的信用。但是当时我的确忘记了问了是否会产生逾期费用。



**8 月 10 号**。查看账单，发现多了五十元的逾期费用。打电话给客服。客服表示，以他的能力，只能给 70 % 的减免力度。这我当然是不肯的，好歹是你们的问题啊？

客服表示三天后再联系我。

三天后也就是 **8 月 13 号**，客服联系了我并表示他尽力了。我要求你的权限不够，请让你的上级来联系我。客服表示两天后让上级联系我。

三天后 16 号打电话询问客服，说还在进行中。到 **8 月 17 日**傍晚，才接到所谓上级的电话。

电话里客服要求我提供浦发银行的收退款记录。他认为，只要有还款操作的，浦发银行应该有记录扣款信息，只是说扣款操作是失败的，但是流水应该是存在的。

第一下，我是惊讶的，你自己的系统，就没有个操作日志么？然后我当场查看了浦发 APP，发现并没有记录。然后客服说抱歉。

但是我手上其实是有验证短信的记录，我说我验证短信也就是为了还款啊，你们连这个也查不出来？对方：抱歉

我当下就怒了，也就五十块钱，当下就说，那你给我直接减免到之前说的 70% 的吧，之后我就去注销了。他喏喏的回答到，之前客服并没有记录相关 70% 的信息，他能给的就只有 60%。我。。。。

我当下也不想沟通了，直接说那你就给 60 吧，直接把电话挂了。

以上就是本次事件的所有情节。

## 3. 分析

好了，让我们开始分析下交行的系统到底有多辣鸡了。

### 3.1 还款 BUG

**首先先说下我遇到的那个问题。**

还款失败到底是不是浦发银行的问题。首先说这是个怎么样的流程。

1. 买单吧（交行信用卡 APP）接受到我还款信息的操作
2. 买单吧发送一条短信验证码，之后验证操作人是本人手机（注意，这个短信是交行发送的，不是浦发发送的）
3. 买单吧发送还款信息（确切说是扣款信息）给浦发银行
4. 这一步就有两种可能：
   1. 浦发银行收到扣款请求之后，当下开始操作。并返回，我已经开始干了。交行提示正在还款中。等
   2. 浦发银行收到扣款请求之后，直接把扣款发过去，并发送请求给交行，说钱已经给了。交行收到钱款之后，确认还款成功

这里 1， 2 肯定是没问题的。

先说第 4 步。这也是客服强调的可能性，浦发银行那边坏事了。

首先强调下，银行汇款的话一般不会是即时的，一般来说周期可能会久一点。而我在 10 号的时候尝试还了七月份的账号，立马就返回了还款成功。所以，4.1 的可能性相对会大一点。也就是浦发银行返回信息的时候，交行就认为已经还款成功了。

但是这里要注意一点，如果是扣款失败，应当有流水记录。而且我当时信用正常，卡内余额也正常。不应该存在特殊性扣款失败。当然不排除，浦发把这种特殊的流水没有放出来。那 4 可以认为浦发失误的可能性大一点，但是前提是浦发流水不放出来，但是我的卡又刚好傻逼了。

但是明白人一看就看出来，还有 3 呢？

3 就是在交行发信息给浦发的时候，发送失败了。而且考虑到我的页面有过几秒钟显示还款中。那可能性很大的就是发送超时。因为银行到银行走的是专线，也就是出现线路问题的可能性也是存在的，同时，也可能是浦发的服务出问题（有幸当时和浦发合作过开发，的确也出现过类似的问题）。但是我还款周期至少有六天。与其说线路问题，我倒更相信交行的代码存在 BUG，导致交行访问浦发的请求失败了。

> 这里就是一个概率的问题。
>
> 假设浦发线路问题，那所有浦发的操作都会被影响
>
> 而开发一般都是接入方进行开发，而接口方很少因为提供接口而更改代码。
>
> 所以**很大概率**，其实就是交行访问浦发的代码库存在问题。（也不排除因为我还款数是账单的 五分之一，触发了偶发性的 BUG）
>
> 更神奇的时候，10 号我再次还款就正常了

这个问题先不说，虽然我判断交行出问题的可能性大一点，但是的确不能判定交行的过失

### 3.2 异步 & 同步

先说下异步和同步的区别。

异步，就是支付宝发起还款信息时，会创建一个还款的操作。等还款正常完成之后，会判定还款成功。并且结束操作。

那同步呢，就是买单吧还款，发送一个信息到服务器，然后等服务器返回，返回期间会显示 **还款中**。但是如果你退出 APP 了，对不起，你连还款状态的查询都没有。

对，这就是所谓的同步请求，最简单，最方便，最省事的办法。简单到连操作流水都不需要创建。这也是之后客服连我还款几次都查询不到的原因。

除此之外，用支付宝还款的小伙伴一定会有感触吧，就是还款成功之后会额外推动一个消息。

但是同步的买单吧，无论是消息还是短信，什么都没有。

这也是我当下都不知道自己还款居然失败了？



### 3.3 日志信息

你偷懒，开发同步请求也就算了。你说连短信发送记录都没有？连我点了几次还款的日志都没有？

> 这一点，不排除是客服没权限接触日志。但是也很清楚的说明一点，交行没有提供一个合理查询平台来查询用户到底有什么操作。

> 打个比方，你如果给了小店老板 100 块钱买了一瓶冰阔落，然后老板转身就说，我没收到过 100。你说不是有监控么？老板回答说，我查不了监控，这个是我儿子装的。我儿子现在在南极探险呢。

所以这一点，至少说明，当你在使用交行信用卡产生纠纷操作时，交行的客服并不能查询到你的行为。这对客户利益是十分严重的蔑视。

### 3.4 客服

客服第一次反馈时间 3 天，丝毫没有变化

第二次反馈 4 天。行吧，你们也是要有工作日的。

但是没有记录信息什么鬼？你们客服说了这么多，连一句话都懒得写？

也就是这么牛逼的客服系统，才会出现第一次减免 70% ，第二次减免 60 % 的反向操作了

### 3.5 语音

最后说说交行的语音识别。嗯，很垃圾。但凡你不是在屋里，但凡你不是一个人。那怕身边的人轻轻说一句话，或者车子开过身边的声音，都会让语音直接进去循环搜索。然后回复一句：对不起，我没有听清您的话。



### 3.6 公众号

额外说下交行的公众号，也是迷的可以。类似招商的工作号，大大小小的账单都会一一推送。并且还会邮件给你当天的消费。



交行呢，也会推送消费信息，但是有且只推送当天第一次消费。真的迷，当时刚用上的时候，还打电话给客服。客服表示，我们的公众号就是这样（爱用不用），你要好就去用买单吧吧。



嗯买单吧的确会推送账号，加一大堆有的没的广告。



## 终

真的优秀，等我收到退款，直接注销。

反正也不缺我一个人对吧。

但是我相信所有人都一样，交行不缺我这样的一个用户，当然也不缺你们这样的一个用户对吧？